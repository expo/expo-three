{"version":3,"file":"readAsStringAsync.js","sourceRoot":"","sources":["../../src/loaders/readAsStringAsync.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AAC5C,OAAO,EAAE,iBAAiB,EAAE,MAAM,kBAAkB,CAAC;AAErD,OAAO,KAAK,MAAM,UAAU,CAAC;AAI7B,MAAM,CAAC,OAAO,CAAC,KAAK,UAAU,+BAA+B,CAC3D,QAAgB;IAEhB,IAAI,MAAM,CAAC,wBAAwB,EAAE;QACnC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;KAC3B;IAED,IAAI,QAAQ,CAAC,EAAE,KAAK,KAAK,EAAE;QACzB,MAAM,MAAM,GAAG,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;QACtC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE,CACrC,MAAM,CAAC,IAAI,CACT,QAAQ,EACR,KAAK,EAAC,KAAK,EAAC,EAAE;YACZ,aAAa;YACb,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC;QACvB,CAAC,EACD,GAAG,EAAE,GAAE,CAAC,EACR,MAAM,CACP,CACF,CAAC;KACH;IACD,IAAI;QACF,OAAO,MAAM,iBAAiB,CAAC,QAAQ,CAAC,CAAC;KAC1C;IAAC,OAAO,EAAE,OAAO,EAAE,EAAE;QACpB,MAAM,IAAI,KAAK,CACb,2CAA2C,QAAQ,KAAK,OAAO,EAAE,CAClE,CAAC;KACH;YAAS;QACR,IAAI,MAAM,CAAC,wBAAwB,EAAE;YACnC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;SAC9B;KACF;AACH,CAAC","sourcesContent":["import { Platform } from '@unimodules/core';\nimport { readAsStringAsync } from 'expo-file-system';\n\nimport THREE from '../Three';\n\ndeclare var global: any;\n\nexport default async function readFromFileSystemAsStringAsync(\n  localUri: string,\n): Promise<string | null> {\n  if (global.__expo_three_log_loading) {\n    console.time('loadAsset');\n  }\n\n  if (Platform.OS === 'web') {\n    const loader = new THREE.FileLoader();\n    return new Promise((resolve, reject) =>\n      loader.load(\n        localUri,\n        async value => {\n          // @ts-ignore\n          resolve(await value);\n        },\n        () => {},\n        reject,\n      ),\n    );\n  }\n  try {\n    return await readAsStringAsync(localUri);\n  } catch ({ message }) {\n    throw new Error(\n      `ExpoTHREE: FileSystem.readAsStringAsync(${localUri}) ${message}`,\n    );\n  } finally {\n    if (global.__expo_three_log_loading) {\n      console.timeEnd('loadAsset');\n    }\n  }\n}\n"]}